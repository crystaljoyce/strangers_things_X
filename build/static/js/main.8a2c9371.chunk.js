(this.webpackJsonpstrangers_things=this.webpackJsonpstrangers_things||[]).push([[0],{35:function(e,t){},36:function(e,t){},37:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(2),a=n.n(r),o=n(6),c=n(3),i=n(1),l=n(15),u=n.n(l),d=n(12),j=n(4),h=n(7),p=function(e){var t,n,r=e.type,l=e.setToken,u=e.setUser,p=Object(i.useState)(""),b=Object(c.a)(p,2),v=b[0],O=b[1],x=Object(i.useState)(""),m=Object(c.a)(x,2),g=m[0],f=m[1],k="login"===r?"Login":"Register",y="login"===r?"You can register by clicking here.  ":"Login",N="login"===r?"Register":"Login",C=Object(j.e)(),w=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,s,o,c,i,d,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("username: ",v),console.log("password: ",g),e.next=5,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/".concat(r),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:v,password:g}})});case 5:return n=e.sent,console.log("response: ",n),e.next=9,n.json();case 9:if(s=e.sent,o=s.data,console.log("{data}: ",{data:o}),c=null===o||void 0===o?void 0:o.token,console.log("token: ",c),!c){e.next=28;break}return l(c),e.next=18,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/me",{method:"GET",headers:{Authorization:"Bearer ".concat(c)}});case 18:return i=e.sent,e.next=21,i.json();case 21:d=e.sent,j=d.data,console.log("data: ",j),u(j),O(""),f(""),C.push("/posts");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:k}),Object(s.jsx)("form",{onSubmit:w,children:Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col",children:Object(s.jsx)("input",(t={type:"text",className:"form-control",placeholder:"user name","aria-label":"user name",value:v,onChange:function(e){return O(e.target.value)}},Object(d.a)(t,"placeholder","username"),Object(d.a)(t,"required",!0),Object(d.a)(t,"minLength",5),t))}),Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)("input",(n={type:"password",className:"form-control",placeholder:"password","aria-label":"password",value:g,onChange:function(e){return f(e.target.value)}},Object(d.a)(n,"placeholder","password"),Object(d.a)(n,"required",!0),Object(d.a)(n,"minLength",8),n)),Object(s.jsx)("button",{type:"submit",children:k})]})," "]})}),Object(s.jsx)(h.b,{to:"/".concat(N),children:y})]})},b=(n(35),n(36),function(e){var t=Object(i.useState)(null),n=(Object(c.a)(t,1)[0],e.postsList),r=e.setPosts,l=e.token,u=e.content,d=e.setContent,j=e.user,p=function(){var e=Object(o.a)(a.a.mark((function e(t){var s,o,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("postIdToDelete",t),e.next=3,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}});case 3:return s=e.sent,e.next=6,s.json();case 6:o=e.sent,console.log("data: ",o),o&&(c=n.filter((function(e){return e._id!==t})),r(c));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts/".concat(t,"/messages"),{method:"POST",headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({message:{content:u}})});case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,console.log(s),console.log("Messages Content: ",s),d(s);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:" Feast your eyes:   "}),n.map((function(e,t){var n,r;return Object(s.jsx)("div",{children:Object(s.jsx)("div",{className:"card",children:Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsxs)(h.b,{to:"/posts/:id",children:[Object(s.jsxs)("h3",{className:"card-title",children:[null===e||void 0===e?void 0:e.title," "]})," "]}),Object(s.jsxs)("h4",{children:["Price: ",null===e||void 0===e?void 0:e.price," "]}),Object(s.jsxs)("h4",{children:[" Offered by user: ",null===e||void 0===e||null===(n=e.author)||void 0===n?void 0:n.username]}),Object(s.jsx)("div",{children:null===e||void 0===e?void 0:e.description}),Object(s.jsxs)("div",{children:["Delivery Available: ",!0===(null===e||void 0===e?void 0:e.willDeliver)?"Yes":"No"]}),Object(s.jsxs)("div",{children:[" ","[On Request]"===(null===e||void 0===e?void 0:e.location)?"":null===e||void 0===e?void 0:e.location,"  "]}),Object(s.jsxs)("div",{children:[" ",null===e||void 0===e?void 0:e.messages]}),Object(s.jsx)("div",{children:(null===e||void 0===e?void 0:e.author.username)===(null===j||void 0===j?void 0:j.username)?Object(s.jsx)("button",{type:"button",className:"btn",onClick:function(){return p(e._id)},children:" Delete "}):""}),l&&(null===e||void 0===e||null===(r=e.author)||void 0===r?void 0:r.username)!==(null===j||void 0===j?void 0:j.username)?Object(s.jsxs)("div",{className:"input-group",children:[Object(s.jsx)("button",{type:"button",className:"btn",onClick:function(){return b(null===e||void 0===e?void 0:e._id)},children:" Respond "}),status=Object(s.jsx)("form",{children:Object(s.jsx)("textarea",{className:"form-control","aria-label":"With textarea",placeholder:"type your message to the seller here ... ",onChange:function(e){return d(e.target.value)}})})]}):""]})})},t)}))]}):Object(s.jsx)("div",{children:" "})}),v=n(17),O=function(e){var t=e.posts,n=e.setPosts,r=e.token,l=Object(i.useState)(""),u=Object(c.a)(l,2),d=u[0],j=u[1],h=Object(i.useState)(""),p=Object(c.a)(h,2),b=p[0],O=p[1],x=Object(i.useState)(""),m=Object(c.a)(x,2),g=m[0],f=m[1],k=Object(i.useState)(""),y=Object(c.a)(k,2),N=y[0],C=y[1],w=Object(i.useState)(!1),P=Object(c.a)(w,2),T=P[0],S=P[1],E=function(){var e=Object(o.a)(a.a.mark((function e(s){var o,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),console.log("title, description: ",d,b),e.next=4,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts",{method:"POST",headers:{"Content-type":"Application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({post:{title:d,description:b,price:g,location:N,willDeliver:T}})});case 4:return c=e.sent,e.next=7,c.json();case 7:i=e.sent,console.log("data: ",i),n([].concat(Object(v.a)(t),[null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.post])),j(""),O(""),f(""),C(""),S(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"List an item for sale:"}),Object(s.jsx)("div",{className:"input-group mb-3",children:Object(s.jsxs)("form",{onSubmit:E,children:[Object(s.jsx)("input",{type:"text",placeholder:"title",className:"form-control",value:d,onChange:function(e){return j(e.target.value)}}),Object(s.jsx)("textarea",{type:"text",placeholder:"description",className:"form-control","aria-label":"With textarea",value:b,onChange:function(e){return O(e.target.value)}})," ",Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"input-group mb-3",children:[Object(s.jsx)("span",{className:"input-group-text",children:"$"}),Object(s.jsx)("input",{type:"text",placeholder:"price","aria-label":"Amount (to the nearest dollar)",className:"form-control",value:g,onChange:function(e){return f(e.target.value)}}),Object(s.jsx)("span",{className:"input-group-text",children:".00"})]}),Object(s.jsx)("input",{type:"text",placeholder:"Location",className:"form-control",value:N,onChange:function(e){return C(e.target.value)}}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{for:"willDeliver",children:"Check the box if you can deliver this item. "}),Object(s.jsx)("input",{type:"checkbox",id:"willDeliver",className:"form-check-input","aria-label":"Checkbox for following text input",placeholder:"willDeliver",checked:T,onChange:function(e){return S(e.target.checked)}})]}),Object(s.jsx)("button",{type:"submit",className:"btn btn-outline-primary",children:"List it!"})]})})]})},x=function(e){var t=e.token,n=e.setUser,r=(e.posts,e.user),l=(e.content,e.setContent,Object(i.useState)([])),u=Object(c.a)(l,2),d=u[0],j=u[1],h=function(){var e=Object(o.a)(a.a.mark((function e(){var s,r,o,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:return c=e.sent,e.next=5,c.json();case 5:i=e.sent,console.log("user posts: ",null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.posts),console.log("user messages : ",null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.messages),j(null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.messages),n(null===i||void 0===i?void 0:i.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){h(),console.log("user posts: ",r)}),[t]);return Object(s.jsx)(s.Fragment,{children:t?Object(s.jsxs)("div",{children:[Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:[" ",null===d||void 0===d?void 0:d.map((function(e,t){var n;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{children:[" ",Object(s.jsxs)(s.Fragment,{children:[" ",Object(s.jsx)("div",{children:(null===e||void 0===e||null===(n=e.fromUser)||void 0===n?void 0:n.username)?Object(s.jsxs)("div",{children:[" ",Object(s.jsx)("br",{})," ",Object(s.jsxs)("h3",{children:[" From user: ",e.fromUser.username," "]}),Object(s.jsxs)("h4",{children:["Title: ",e.post.title," "]}),Object(s.jsxs)("p",{children:[e.content," "]})," ",Object(s.jsx)("hr",{})," ",Object(s.jsx)("br",{})," "]}):""})]})]},t)})}))]})]}):"You must be a registered User to read Messages"})},m=function(e){var t,n,r=e.user,c=e.token,l=e.setUser,u=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 2:return n=e.sent,e.next=5,n.json();case 5:s=e.sent,console.log("user posts: ",null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.posts),console.log("user : ",null===s||void 0===s?void 0:s.data),l(null===s||void 0===s?void 0:s.data);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){u(),console.log("user posts: ",r)}),[c]),Object(s.jsxs)(s.Fragment,{children:["  ",c?Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Current user: "}),Object(s.jsx)("h5",{children:null===r||void 0===r?void 0:r.username}),Object(s.jsxs)("div",{children:[" Total Posts Created: ",null===r||void 0===r||null===(t=r.messages)||void 0===t?void 0:t.length,"  "]}),Object(s.jsxs)("div",{children:[" Total Messages: ",null===r||void 0===r||null===(n=r.posts)||void 0===n?void 0:n.length]})]}):"You must be a Registered User to view Profile."]})},g=function(){var e=Object(i.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],l=Object(i.useState)({}),u=Object(c.a)(l,2),d=u[0],v=u[1],g=Object(i.useState)([]),f=Object(c.a)(g,2),k=f[0],y=f[1],N=Object(i.useState)(null),C=Object(c.a)(N,2),w=(C[0],C[1]),P=Object(i.useState)([]),T=Object(c.a)(P,2),S=T[0],E=T[1],U=Object(i.useState)(""),B=Object(c.a)(U,2),R=(B[0],B[1],function(){var e=Object(o.a)(a.a.mark((function e(){var t,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 2:return t=e.sent,e.next=5,t.json();case 5:s=e.sent,console.log("user: ",null===s||void 0===s?void 0:s.data),v(null===s||void 0===s?void 0:s.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(i.useEffect)((function(){R(),console.log("user: ",d)}),[n]);var M=function(){var e=Object(o.a)(a.a.mark((function e(){var t,s,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts",{headers:{"Content-Type":"application/json",Authorization:n?"Bearer ".concat(n):void 0}});case 2:return r=e.sent,e.next=5,r.json();case 5:return o=e.sent,y(o.data.posts),console.log("posts: ",o.data.posts),w(null===o||void 0===o||null===(t=o.data)||void 0===t||null===(s=t.posts)||void 0===s?void 0:s._id),e.abrupt("return",o.data.posts);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){M()}),[]),Object(s.jsxs)("div",{children:[(null===d||void 0===d?void 0:d.username)&&Object(s.jsxs)("div",{children:["Hello, ",null===d||void 0===d?void 0:d.username,"! "]}),Object(s.jsx)("ul",{className:"nav justify-content-center",children:Object(s.jsxs)("nav",{className:"nav",role:"navigation",children:[Object(s.jsx)("li",{className:"nav item",children:Object(s.jsx)(h.b,{to:"/",className:"nav-link","aria-current":"page",children:"Home"})}),Object(s.jsx)("li",{className:"nav item",children:Object(s.jsx)(h.b,{to:"/posts",className:"nav-link","aria-current":"page",children:"Posts"})}),Object(s.jsx)("li",{className:"nav item",children:Object(s.jsx)(h.b,{to:"/profile",className:"nav-link","aria-current":"page",children:"Profile"})}),Object(s.jsx)("li",{className:"nav item",children:Object(s.jsx)(h.b,{to:"/messages",className:"nav-link","aria-current":"page",children:"Messages"})}),Object(s.jsx)("li",{className:"nav item",children:Object(s.jsx)(h.b,{to:"/login",className:"nav-link","aria-current":"page",children:"Login"})})]})}),Object(s.jsx)(j.a,{path:"/login",children:Object(s.jsx)(p,{type:"login",setToken:r,setUser:v})}),Object(s.jsx)(j.a,{path:"/register",children:Object(s.jsx)(p,{type:"register",setToken:r,setUser:v})}),Object(s.jsxs)(j.a,{path:"/Posts",children:[n?Object(s.jsxs)("div",{children:[" ",Object(s.jsx)(O,{setPosts:y,posts:k,setToken:r,token:n}),Object(s.jsx)("hr",{})]}):"",Object(s.jsx)(b,{postsList:k,token:n,setPosts:y,content:S,setContent:E,user:d})]}),Object(s.jsx)(j.a,{path:"/messages",children:n?Object(s.jsxs)("div",{children:[" ",Object(s.jsx)(x,{posts:k,setPosts:y,token:n,setToken:r,setUser:v})," "]}):"You must be a Registered User to view Messages"}),Object(s.jsx)(j.a,{path:"/profile",children:Object(s.jsx)(m,{user:d,setUser:v,token:n})})]})};u.a.render(Object(s.jsx)(h.a,{children:Object(s.jsx)(g,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.8a2c9371.chunk.js.map